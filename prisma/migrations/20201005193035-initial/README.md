# Migration `20201005193035-initial`

This migration has been generated by Devin Matte at 10/5/2020, 3:30:35 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Company" DROP CONSTRAINT "Company_headquarters_fkey"

ALTER TABLE "public"."Interview" DROP CONSTRAINT "Interview_companyid_fkey"

ALTER TABLE "public"."JobReview" DROP CONSTRAINT "JobReview_companyid_fkey"

ALTER TABLE "public"."Offer" DROP CONSTRAINT "Offer_cityid_fkey"

ALTER TABLE "public"."Offer" DROP CONSTRAINT "Offer_companyid_fkey"

ALTER TABLE "public"."Company" DROP COLUMN "headquarters",
ADD COLUMN "cityId" integer   

ALTER TABLE "public"."Interview" DROP COLUMN "companyid",
ADD COLUMN "companyId" integer   NOT NULL 

ALTER TABLE "public"."JobReview" DROP COLUMN "companyid",
ADD COLUMN "companyId" integer   NOT NULL 

ALTER TABLE "public"."Offer" DROP COLUMN "companyid",
DROP COLUMN "cityid",
ADD COLUMN "cityId" integer   ,
ADD COLUMN "companyId" integer   NOT NULL 

ALTER TABLE "public"."Company" ADD FOREIGN KEY ("cityId")REFERENCES "public"."City"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Interview" ADD FOREIGN KEY ("companyId")REFERENCES "public"."Company"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."JobReview" ADD FOREIGN KEY ("companyId")REFERENCES "public"."Company"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Offer" ADD FOREIGN KEY ("cityId")REFERENCES "public"."City"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Offer" ADD FOREIGN KEY ("companyId")REFERENCES "public"."Company"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER INDEX "public"."Company_glassdoor_key" RENAME TO "Company.glassdoor_unique"

ALTER INDEX "public"."Company_website_key" RENAME TO "Company.website_unique"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201005193035-initial
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,76 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model City {
+  id       Int       @id @default(autoincrement())
+  city     String
+  state    String?
+  country  String
+  Companys Company[]
+  Offers   Offer[]
+}
+
+model Company {
+  id           Int         @id @default(autoincrement())
+  name         String
+  website      String?     @unique
+  headquarters City?
+  glassdoor    String?     @unique
+  Interviews   Interview[]
+  JobReviews   JobReview[]
+  Offers       Offer[]
+}
+
+model Interview {
+  id              Int      @id @default(autoincrement())
+  member          String
+  company         Company
+  interviewcount  Int      @default(1)
+  codingchallenge Boolean? @default(false)
+  onsite          Boolean? @default(false)
+  body            String?
+}
+
+model JobReview {
+  id         Int       @id @default(autoincrement())
+  member     String
+  job_type   jobtype
+  company    Company
+  start_date DateTime
+  end_date   DateTime?
+  body       String?
+}
+
+model Offer {
+  id            Int       @id @default(autoincrement())
+  member        String
+  pay           Float
+  paytype       paytype
+  offerdate     DateTime?
+  offerdeadline DateTime?
+  housing       housing?
+  stipend       Float     @default(0)
+  city          City?
+  company       Company
+}
+
+enum housing {
+  corporate
+  stipend
+}
+
+enum jobtype {
+  co_op @map("co-op")
+  full_time @map("full-time")
+}
+
+enum paytype {
+  hourly
+  salary
+}
```


